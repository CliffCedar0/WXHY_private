import{g as a,f as e,s as t,c as l,w as s,i,o as n,a as u,b as r,t as h,j as c,k as g,F as d,m as o,e as f}from"./index-0QxPuGFc.js";import{s as _,f as p,h as S,a as b}from"./sizhu.CySFRyyU.js";import{Z as m,g as y}from"./shensha.BNxbvs-g.js";import{g as z}from"./calc.CCjqVGUy.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w={0:"å­",1:"å­",2:"ä¸‘",3:"ä¸‘",4:"å¯…",5:"å¯…",6:"å¯",7:"å¯",8:"è¾°",9:"è¾°",10:"å·³",11:"å·³",12:"åˆ",13:"åˆ",14:"æœª",15:"æœª",16:"ç”³",17:"ç”³",18:"é…‰",19:"é…‰",20:"æˆŒ",21:"æˆŒ",22:"äº¥",23:"äº¥"},x=["é’é¾™","æœ±é›€","è…¾è›‡","å‹¾é™ˆ","ç™½è™","ç„æ­¦"],L={"ç”²":0,"ä¹™":0,"ä¸™":1,"ä¸":1,"æˆŠ":3,"å·±":3,"åºš":4,"è¾›":4,"å£¬":5,"ç™¸":5},D=[[0,0],[1,0],[0,1],[1,1],[1,2],[2,1]],Z={"ç”²":"æœ¨","ä¹™":"æœ¨","å¯…":"æœ¨","å¯":"æœ¨","æœ¨":"æœ¨","ä¸™":"ç«","ä¸":"ç«","å·³":"ç«","åˆ":"ç«","ç«":"ç«","æˆŠ":"åœŸ","å·±":"åœŸ","è¾°":"åœŸ","æˆŒ":"åœŸ","ä¸‘":"åœŸ","æœª":"åœŸ","åœŸ":"åœŸ","åºš":"é‡‘","è¾›":"é‡‘","ç”³":"é‡‘","é…‰":"é‡‘","é‡‘":"é‡‘","å£¬":"æ°´","ç™¸":"æ°´","äº¥":"æ°´","å­":"æ°´","æ°´":"æ°´"},G={"æœ¨":"ç«","ç«":"åœŸ","åœŸ":"é‡‘","é‡‘":"æ°´","æ°´":"æœ¨"},W={"æœ¨":"åœŸ","åœŸ":"æ°´","æ°´":"ç«","ç«":"é‡‘","é‡‘":"æœ¨"};const k=C({data:()=>({solarDateStr:"",lunarDateStr:"",bazi:[],shenshaRows:[],inputGrid:[],liuShenGrid:[["","",""],["","",""],["","",""]],siZhuData:null}),onLoad(a){if(a.grid)try{this.inputGrid=JSON.parse(decodeURIComponent(a.grid))}catch(e){console.error("Failed to parse grid",e)}a.datetime&&(this.solarDateStr=decodeURIComponent(a.datetime)),this.initData()},methods:{goBack(){a().length>1?e():t({url:"/pages/wuzhaobu/start/start"})},initData(){let a;if(this.solarDateStr){const e=this.solarDateStr.split(" "),t=e[0].split("-"),l=e[1]?e[1].split(":"):["12","00"];a=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]),parseInt(l[0]),parseInt(l[1]))}else{a=new Date;const e=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0"),s=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0");this.solarDateStr=`${e}-${t}-${l} ${s}:${i}`}this.calculateLunarDate(a),this.calculateBazi(a),this.calculateLiuShen(),this.calculateShenSha()},calculateLunarDate(a){try{const e=_(a);if(e){const t=String(e.year).split("").map((a=>["ã€‡","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹"][parseInt(a)])).join(""),l=p(e.month),s=S(e.day),i=w[a.getHours()]+"æ—¶";this.lunarDateStr=`${t}å¹´${e.isLeap?"é—°":""}${l}æœˆ${s} ${i}`}}catch(e){console.error("Lunar calculation failed:",e),this.lunarDateStr="å†œå†è®¡ç®—é”™è¯¯"}},calculateBazi(a){try{const e=b(a);console.log("SiZhu result:",e),e&&(this.siZhuData=e,this.bazi=[{gan:e.yearGan,zhi:e.yearZhi,nayin:z(e.year)},{gan:e.monthGan,zhi:e.monthZhi,nayin:z(e.month)},{gan:e.dayGan,zhi:e.dayZhi,nayin:z(e.day)},{gan:e.hourGan,zhi:e.hourZhi,nayin:z(e.hour)}])}catch(e){console.error("Bazi calculation failed:",e),this.bazi=[{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""}],this.siZhuData=null}},calculateLiuShen(){if(this.liuShenGrid=[["","",""],["","",""],["","",""]],!this.bazi||this.bazi.length<3||!this.bazi[2].gan)return;const a=this.bazi[2].gan,e=L[a];if(void 0!==e)for(let t=0;t<6;t++){const a=(e+t)%6,[l,s]=D[t];this.$set(this.liuShenGrid[l],s,x[a])}else console.error("Unknown day gan:",a)},calculateShenSha(){if(this.siZhuData)try{const a={yearGan:this.siZhuData.yearGan,yearZhi:this.siZhuData.yearZhi,monthGan:this.siZhuData.monthGan,monthZhi:this.siZhuData.monthZhi,dayGan:this.siZhuData.dayGan,dayZhi:this.siZhuData.dayZhi,hourGan:this.siZhuData.hourGan,hourZhi:this.siZhuData.hourZhi},e=[];m.forEach((t=>{const l=y(t,a,"");l&&l.length>0&&l.forEach((a=>{e.push({name:a,val:t})}))}));const t=[];for(let l=0;l<e.length;l+=5)t.push(e.slice(l,l+5));this.shenshaRows=t}catch(a){console.error("ShenSha calculation failed:",a),this.shenshaRows=[]}else this.shenshaRows=[]},getElementChar(a,e){return this.inputGrid&&this.inputGrid[a]&&this.inputGrid[a][e]?this.inputGrid[a][e]:""},getCellDetails:(a,e)=>null,getLiuShen(a,e){return this.liuShenGrid&&this.liuShenGrid[a]&&this.liuShenGrid[a][e]?this.liuShenGrid[a][e]:""},getLiuShenClass:a=>({"é’é¾™":"liushen-qinglong","æœ±é›€":"liushen-zhuque","è…¾è›‡":"liushen-tengshe","å‹¾é™ˆ":"liushen-gouchen","ç™½è™":"liushen-baihu","ç„æ­¦":"liushen-xuanwu"}[a]||""),getWuxingClass:a=>({"ç”²":"wood","ä¹™":"wood","å¯…":"wood","å¯":"wood","æœ¨":"wood","ä¸™":"fire","ä¸":"fire","å·³":"fire","åˆ":"fire","ç«":"fire","æˆŠ":"earth","å·±":"earth","è¾°":"earth","æˆŒ":"earth","ä¸‘":"earth","æœª":"earth","åœŸ":"earth","åºš":"metal","è¾›":"metal","ç”³":"metal","é…‰":"metal","é‡‘":"metal","å£¬":"water","ç™¸":"water","äº¥":"water","å­":"water","æ°´":"water"}[a]||""),getXunKong(a){if(!a||a.length<2)return"";const e=a.charAt(0),t=a.charAt(1),l=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],s=["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"].indexOf(e),i=l.indexOf(t);if(-1===s||-1===i)return"";const n=(i-s+12)%12,u=(n-1+12)%12;return l[(n-2+12)%12]+l[u]},getNayinColor(a){if(!a)return"";const e=a.slice(-1);return this.getWuxingClass(e)},getWuxing(a,e){const t=this.getElementChar(a,e);return Z[t]||""},getLiuQin(a,e){if(0===a&&0===e)return"";return function(a,e){return a&&e?a===e?"å…„å¼Ÿ":G[e]===a?"çˆ¶æ¯":W[e]===a?"å®˜é¬¼":G[a]===e?"å­å­™":W[a]===e?"å¦»è´¢":"":""}(this.getWuxing(0,0),this.getWuxing(a,e))}}},[["render",function(a,e,t,_,p,S){const b=f,m=i;return n(),l(m,{class:"container"},{default:s((()=>[u(m,{class:"top-bar"},{default:s((()=>[u(m,{class:"back-btn",onClick:S.goBack},{default:s((()=>[u(b,{class:"back-text"},{default:s((()=>[r("è¿”å›")])),_:1})])),_:1},8,["onClick"]),u(b,{class:"page-title"},{default:s((()=>[r("äº”å…†åœ")])),_:1}),u(m,{class:"placeholder"})])),_:1}),u(m,{class:"info-card"},{default:s((()=>[u(m,{class:"date-section"},{default:s((()=>[u(m,{class:"date-row"},{default:s((()=>[u(b,{class:"label"},{default:s((()=>[r("å…¬å†ï¼š")])),_:1}),u(b,{class:"value"},{default:s((()=>[r(h(p.solarDateStr),1)])),_:1})])),_:1}),u(m,{class:"date-row"},{default:s((()=>[u(b,{class:"label"},{default:s((()=>[r("å†œå†ï¼š")])),_:1}),u(b,{class:"value lunar"},{default:s((()=>[r(h(p.lunarDateStr),1)])),_:1})])),_:1})])),_:1}),u(m,{class:"bazi-grid"},{default:s((()=>[u(m,{class:"bazi-row header-row"},{default:s((()=>[u(m,{class:"bazi-cell header-cell"},{default:s((()=>[u(b,null,{default:s((()=>[r("å¹´")])),_:1})])),_:1}),u(m,{class:"bazi-cell header-cell"},{default:s((()=>[u(b,null,{default:s((()=>[r("æœˆ")])),_:1})])),_:1}),u(m,{class:"bazi-cell header-cell"},{default:s((()=>[u(b,null,{default:s((()=>[r("æ—¥")])),_:1})])),_:1}),u(m,{class:"bazi-cell header-cell"},{default:s((()=>[u(b,null,{default:s((()=>[r("æ—¶")])),_:1})])),_:1})])),_:1}),u(m,{class:"bazi-row"},{default:s((()=>[(n(!0),c(d,null,g(p.bazi,((a,e)=>(n(),l(m,{class:"bazi-cell",key:"gz-"+e},{default:s((()=>[u(b,{class:o(S.getWuxingClass(a.gan))},{default:s((()=>[r(h(a.gan),1)])),_:2},1032,["class"]),u(b,{class:o(S.getWuxingClass(a.zhi))},{default:s((()=>[r(h(a.zhi),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1}),u(m,{class:"bazi-row xunkong-row"},{default:s((()=>[(n(!0),c(d,null,g(p.bazi,((a,e)=>(n(),l(m,{class:"bazi-cell",key:"xk-"+e},{default:s((()=>[u(b,{class:o(["xunkong-text",S.getWuxingClass(S.getXunKong(a.gan+a.zhi).charAt(0))])},{default:s((()=>[r(h(S.getXunKong(a.gan+a.zhi).charAt(0)),1)])),_:2},1032,["class"]),u(b,{class:o(["xunkong-text",S.getWuxingClass(S.getXunKong(a.gan+a.zhi).charAt(1))])},{default:s((()=>[r(h(S.getXunKong(a.gan+a.zhi).charAt(1)),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1}),u(m,{class:"bazi-row nayin-row"},{default:s((()=>[(n(!0),c(d,null,g(p.bazi,((a,e)=>(n(),l(m,{class:"bazi-cell",key:"ny-"+e},{default:s((()=>[u(b,{class:o(["nayin-text",S.getNayinColor(a.nayin)])},{default:s((()=>[r(h(a.nayin),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),u(m,{class:"display-card"},{default:s((()=>[u(m,{class:"grid-display"},{default:s((()=>[u(m,{class:"grid-row"},{default:s((()=>[u(m,{class:"grid-cell"},{default:s((()=>[u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(0,0))])},{default:s((()=>[r(h(S.getElementChar(0,0)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(0,0))])},{default:s((()=>[r(h(S.getLiuShen(0,0)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r("å…†èº«")])),_:1})])),_:1}),u(m,{class:"grid-cell"},{default:s((()=>[u(b,{class:"wuxing-bg fire"},{default:s((()=>[r("ç«")])),_:1}),u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(0,1))])},{default:s((()=>[r(h(S.getElementChar(0,1)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(0,1))])},{default:s((()=>[r(h(S.getLiuShen(0,1)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r(h(S.getLiuQin(0,1)),1)])),_:1})])),_:1}),u(m,{class:"grid-cell empty-cell"})])),_:1}),u(m,{class:"grid-row"},{default:s((()=>[u(m,{class:"grid-cell"},{default:s((()=>[u(b,{class:"wuxing-bg wood"},{default:s((()=>[r("æœ¨")])),_:1}),u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(1,0))])},{default:s((()=>[r(h(S.getElementChar(1,0)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(1,0))])},{default:s((()=>[r(h(S.getLiuShen(1,0)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r(h(S.getLiuQin(1,0)),1)])),_:1})])),_:1}),u(m,{class:"grid-cell center-cell"},{default:s((()=>[u(b,{class:"wuxing-bg earth"},{default:s((()=>[r("åœŸ")])),_:1}),u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(1,1))])},{default:s((()=>[r(h(S.getElementChar(1,1)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(1,1))])},{default:s((()=>[r(h(S.getLiuShen(1,1)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r(h(S.getLiuQin(1,1)),1)])),_:1})])),_:1}),u(m,{class:"grid-cell"},{default:s((()=>[u(b,{class:"wuxing-bg metal"},{default:s((()=>[r("é‡‘")])),_:1}),u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(1,2))])},{default:s((()=>[r(h(S.getElementChar(1,2)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(1,2))])},{default:s((()=>[r(h(S.getLiuShen(1,2)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r(h(S.getLiuQin(1,2)),1)])),_:1})])),_:1})])),_:1}),u(m,{class:"grid-row"},{default:s((()=>[u(m,{class:"grid-cell empty-cell"}),u(m,{class:"grid-cell"},{default:s((()=>[u(b,{class:"wuxing-bg water"},{default:s((()=>[r("æ°´")])),_:1}),u(b,{class:o(["big-char",S.getWuxingClass(S.getElementChar(2,1))])},{default:s((()=>[r(h(S.getElementChar(2,1)||"ç©º"),1)])),_:1},8,["class"]),u(b,{class:o(["liushen-label",S.getLiuShenClass(S.getLiuShen(2,1))])},{default:s((()=>[r(h(S.getLiuShen(2,1)),1)])),_:1},8,["class"]),u(b,{class:"liuqin-label"},{default:s((()=>[r(h(S.getLiuQin(2,1)),1)])),_:1})])),_:1}),u(m,{class:"grid-cell empty-cell"})])),_:1})])),_:1})])),_:1}),u(m,{class:"shensha-card"},{default:s((()=>[u(m,{class:"section-title"},{default:s((()=>[r("ç¥ç…")])),_:1}),(n(!0),c(d,null,g(p.shenshaRows,((a,e)=>(n(),l(m,{class:"ss-row",key:e},{default:s((()=>[(n(!0),c(d,null,g(a,((a,e)=>(n(),l(m,{class:"ss-item",key:e},{default:s((()=>[u(b,{class:"ss-name"},{default:s((()=>[r(h(a.name),1)])),_:2},1024),u(b,{class:"ss-dash"},{default:s((()=>[r("-")])),_:1}),u(b,{class:"ss-val"},{default:s((()=>[r(h(a.val),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1}),u(m,{class:"copyright-info"},{default:s((()=>[u(m,{class:"copyright-line"},{default:s((()=>[r("Â© Developer: æ™¯å· Â· Wechat: Im_JingChuang")])),_:1}),u(m,{class:"copyright-line"},{default:s((()=>[r("Â© Technical supporter: å¿æ ¸ Â· Wechat: qinghe4994")])),_:1}),u(m,{class:"copyright-line"},{default:s((()=>[r("Â© Server supporterï¼š ğŸç‡•ä¹ç§¦ğŸ WeChatï¼šaispidercc")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-827144b4"]]);export{k as default};
